!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o="data/answers.json";function a(e){return(location.search.split(e+"=")[1]||"").split("&")[0]}var u=function(e){return e=[].concat(e),Promise.all(e.map((function(e){return new Promise((function(t){var n=document.createElement("script");n.type="text/javascript",n.src=e,n.async=!1,n.onload=function(){t()},document.getElementsByTagName("head")[0].appendChild(n)}))})))};function i(){var e="abcdefghijklmnopqrstuvwxyz";return e[Math.floor(Math.random()*e.length)]}function c(e,t,n,r){void 0===r&&(r=!0);var o=t.filter((function(e){return e.level<=n&&(!r||e.answers&&e.answers.length)}));return e.shuffle&&o.shuffle(),(o=o.slice(0,e.displayLimit)).sort((function(e,t){return e.level-t.level})),o}function s(e){document.querySelector(e).style.display="none"}function l(){var e={js:"ace/mode/javascript",html:"ace/mode/html"};Array.from(document.querySelectorAll("article .code")).forEach((function(t){var n=t.getAttribute("data-type"),r=ace.edit(t),o=ace.require("ace/ext/beautify"),a=r.getSession();r.setReadOnly(!0),r.getSession().selection.on("changeSelection",(function(){r.getSession().selection.clearSelection()})),r.setTheme("ace/theme/monokai"),a.setMode(e[n]),o.beautify(a),r.setOptions({maxLines:1/0})}))}function f(e){if(!(e=e||a("test")))return null;var t=new Date,n=t.getMonth()+t.getDate()+t.getHours();return e.split(/[a-z]+/).map((function(e){return parseInt(e)-n})).sort((function(e,t){return e-t}))}var d,p,h,v,y,m=function(e,t,n){var r=document.createElement("div");return r.classList.add("level-selector"),e&&e.length&&(r.innerHTML='\n      <label>\n        Nivel\n        <select name="levelSelector">\n          '+e.map((function(e){return'<option value="'+e.value+'" '+(e.value===t?'selected="selected"':"")+">"+e.text+"</option>"})).join("")+"\n        </select>\n      </label>\n    ",r.querySelector("select").addEventListener("change",n)),r},w=(p={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'"},h={},v=function(){var e=[];for(var t in p){var n=p[t];h[n]=t,e.push(n)}return new RegExp("("+e.join("|")+")","g")}(),y=function(e,t){return h[t]},{reset:function(e){Array.from(document.querySelectorAll("#questions article")).forEach((function(e){e.parentNode.removeChild(e)})),w.render(e,d),document.querySelector("#result .q-point").innerHTML="&nbsp;",document.querySelector("#test-result .q-point").innerHTML="&nbsp;",document.querySelector("#submit-test").style.display=""},render:function(e,t){!function e(t,n,r){if(Array.isArray(n))n.forEach((function(n,r){e(t,n,r+1)}));else if(void 0!==n){var o=n.q,a=n.type||"js";"html"===a?o=function(e){return e=e.replace(/</g,"&lt;")}(o):"function"==typeof o?o=function(e){var t=e.trim();return t=(t=(t=t.replace(/\s*\(\s*\)\s*=>\s*{/,"")).replace(/function\s+q\d+\(\)\s*\{/,"")).substring(0,t.length-1),b(t)}(o.toString()):o&&(o=b(o));var u=n.answerType||"checkbox",i=n.answers?S(n.id,n.answers,u,t):"",c=g(n.text,o,i,r,n.id,a,n);document.querySelector("#questions").appendChild(c)}else console.warn("no function")}(t,e),(d=t)&&d.afterRender(),w.correctAnswers(e)},isText:function(e){return"text"===e||"number"===e},correctAnswers:function(e){window.questions=e,e=e.filter((function(e){return e.answers})),window.correctAnswers=e.reduce((function(e,t){var n;if(w.isText(t.answerType))n=t.answers[0].correct;else{var r=t.answers.find((function(e){return!0===e.correct}));r&&(n=r.id)}return void 0!==n&&(e[t.id]=[n]),e}),{})},htmlEncode:function(e){return e?String(e).replace(v,y):e},sanitizeAnswer:function(e){var t=e.type,n=w.htmlEncode(e.text);switch(t){case"mixed":n=e.text;break;case"js":case"html":case"css":case"code":n="<code>"+n+"</code>"}return n},checkPoints:function(e,t){return t||(console.warn("no correctAnswers for ",e,e[0].id),console.warn("question",document.querySelector('input[name="'+e[0].id+'"]').parentNode.parentNode.parentNode),t=[]),e.map((function(e){var n,o;return w.isText(e.type)?(n=!0,o=e.value==t[0]?1:0):(n=t.indexOf(e.value)>=0,o=e.checked&&n?1:e.checked?-1:0),r(r({},e),{point:o,required:n})}))},markResults:function(e){e.forEach((function(e){var t=w.isText(e.type),n=(t?document.querySelector('input[name="'+e.id+'"]'):document.querySelector('input[name="'+e.id+'"][value="'+e.value+'"]')).parentNode;n.classList.remove("correct-answer"),n.classList.remove("required-answer"),n.classList.remove("incorrect-answer"),e.required&&e.checked?!t||e.point?n.classList.add("correct-answer"):n.classList.add("incorrect-answer"):e.required&&!e.checked?n.classList.add("required-answer"):!e.required&&e.checked&&n.classList.add("incorrect-answer")}))}});Array.prototype.shuffle=function(){var e,t,n=this.length;if(0==n)return this;for(;--n;)e=Math.floor(Math.random()*(n+1)),t=this[n],this[n]=this[e],this[e]=t;return this};var b=function(e){return e=(e=(e=e.replace(/</g,"&lt;")).replace(/\}\}/g,"} } ")).replace(/\n\s*\n/g,"\n")};var g=function(e,t,n,r,o,a,u){var i=n?'<ol type="A" class="'+(u.answerDisplay||"")+'">\n         '+n+"\n       </ol>":"";r=r?r+") ":"";var c=t?'<pre class="code" data-type="'+a+'">'+t+"</pre>":"",s=document.createElement("article");return s.id="q-"+o,s.innerHTML='<h2><span class="q-point"></span><span class="q-nr">'+r+"</span>"+e+"</h2>\n    "+c+"\n    "+i,s},S=function(e,t,n,r){return r.shuffle&&t.shuffle(),"<li>"+(t||[]).map((function(t){return'<label><input class="answer" type="'+n+'" name="'+e+'" value="'+(w.isText(n)?"":t.id)+'">'+w.sanitizeAnswer(t)+"</label>"})).join("</li><li>")+"</li>"},x=function(e,t){var n=w.checkPoints(e,t);w.markResults(n);var r=n.reduce((function(e,t){return e+t.point}),0),o=t.length;return 0===o&&(o=1),(r>0?r:0)/o},j=function(e,t){var n=Object.keys(e).length,r=0;for(var o in e)if(e.hasOwnProperty(o)){var u=x(e[o],t[o]),i=Math.round(100*u)/100;document.querySelector("#q-"+o+" .q-point").innerHTML=""+i,1===i&&document.querySelector("#q-"+o).classList.add("correct"),r+=u}r=r.toFixed(2),document.querySelector("#result .q-point").innerHTML=r+"/"+n,document.querySelector("#test-result .q-point").innerHTML=r+"/"+n,document.querySelector("#submit-test").disabled=!0,q(!0),a("test")&&window.print()},q=function(e){Array.from(document.querySelectorAll("input.answer")).forEach((function(t){"radio"===t.type||"checkbox"===t.type?t.disabled=e:t.readOnly=e}))};window.submitTest=function(){var e=Array.from(document.querySelectorAll("input.answer")).map((function(e){var t=e.type,n=w.isText(t);return{id:e.name,value:n?e.value:1*e.value,checked:n?""!==e.value:e.checked,type:t}})).reduce((function(e,t){return e[t.id]=e[t.id]||[],e[t.id].push(t),e}),{});"{}"!==JSON.stringify(window.correctAnswers)?j(e,window.correctAnswers):fetch(o).then((function(e){return e.json()})).then((function(t){j(e,t)}))};var k=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function u(e){try{c(r.next(e))}catch(e){a(e)}}function i(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,i)}c((r=r.apply(e,t||[])).next())}))},L=function(e,t){var n,r,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(e,u)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},M=[],T=function(){return Object.keys(window.ALL_QUESTIONS.reduce((function(e,t){return e[t.level]=t.level,t.level||console.warn("no level",t),e}),{})).map((function(e){return{value:parseInt(e),text:e}}))},A={shuffle:!0,displayLimit:10,init:function(){return k(void 0,void 0,void 0,(function(){var e;return L(this,(function(t){switch(t.label){case 0:return e=["js/questions/js.js","https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.3/ace.js","https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.3/ext-beautify.js","https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.3/mode-javascript.js"],String.prototype.padStart||e.push("https://cdn.jsdelivr.net/npm/string-polyfills"),[4,u(e)];case 1:return t.sent(),M=T(),[2]}}))}))},getLevelSelector:function(e,t){return m(M,e,t)},afterRender:function(){l()},generateQuestions:function(e){return c(A,window.ALL_QUESTIONS,e,!0)},reset:function(){}},O=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function u(e){try{c(r.next(e))}catch(e){a(e)}}function i(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,i)}c((r=r.apply(e,t||[])).next())}))},E=function(e,t){var n,r,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(e,u)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},I=[{value:10,text:"Clasa I. Adunare cu trecere peste ordin - &#128288;",generator:function(){return C("+",3,"radio")}},{value:11,text:"Clasa I. Adunare cu trecere peste ordin - &#9997;",generator:function(){return C("+",3,"number")}},{value:15,text:"Clasa I. Adunare - afla numarul necunoscut - &#128288;",generator:function(){return C("+",0,"radio")}},{value:16,text:"Clasa I. Adunare - afla numarul necunoscut - &#9997;",generator:function(){return C("+",0,"number")}},{value:20,text:"Clasa I. Scaderea cu trecere peste ordin - &#128288;",generator:function(){return C("-",3,"radio")}},{value:21,text:"Clasa I. Scaderea cu trecere peste ordin - &#9997;",generator:function(){return C("-",3,"number")}},{value:25,text:"Clasa I. Scaderea - afla numarul necunoscut - &#128288;",generator:function(){return C("-",0,"radio")}},{value:26,text:"Clasa I. Scaderea - afla numarul necunoscut - &#9997;",generator:function(){return C("-",0,"number")}},{value:27,text:"Clasa I. Adunare si Scaderea - &#9997;",generator:function(){return C("",0,"number")}}],C=function(e,t,n){void 0===n&&(n="radio");for(var r=[],o=0;o<10;o++){var a=e||(Math.random()<.5?"+":"-"),u=void 0,c=void 0,s=void 0,l=void 0;"+"===a?(l=(s=Math.floor(79*Math.random())+20)%10+1,c=s-(u=Math.floor(Math.random()*(s-l))+l)):(l=(u=Math.floor(79*Math.random())+20)%10+1,s=u-(c=Math.floor(Math.random()*(u-l))+l));var f=t||1+Math.floor(2*Math.random()),d=void 0,p=i();1===f?(d=u,u=p):2===f?(d=c,c=p):(d=s,s="?");var h=P(d,n);r.push({id:o,level:10,text:u+" "+a+" "+c+" = "+s,answerType:n,answerDisplay:"inline-block",answers:h})}return r},P=function(e,t){var n=[];if("radio"===t)for(var r=Math.min(Math.floor(4*Math.random()),e),o=0;o<4;o++,r--)n.push({id:o,text:e-r,correct:0===r});else n.push({id:0,text:"",correct:e});return n};var N={shuffle:!0,displayLimit:10,init:function(){return O(void 0,void 0,void 0,(function(){var e;return E(this,(function(t){switch(t.label){case 0:return s("#test-result"),e=[],String.prototype.padStart||e.push("https://cdn.jsdelivr.net/npm/string-polyfills"),[4,u(e)];case 1:return t.sent(),[2]}}))}))},getLevelSelector:function(e,t){return m(I,e,t)},afterRender:function(){},generateQuestions:function(e){var t=I.find((function(t){return t.value===e}));return t||(console.warn("TODO find closest generator"),t=I[0]),t.generator()},reset:function(){}},H=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function u(e){try{c(r.next(e))}catch(e){a(e)}}function i(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,i)}c((r=r.apply(e,t||[])).next())}))},_=function(e,t){var n,r,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(e,u)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},Q=[];function D(){s("#submit-test"),s("#test-result"),s("#reset"),s("#result")}var R={shuffle:!1,displayLimit:999,init:function(){return H(void 0,void 0,void 0,(function(){var e;return _(this,(function(t){switch(t.label){case 0:return D(),e=["js/questions/js-homework.js","https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.3/ace.js","https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.3/ext-beautify.js","https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.3/mode-javascript.js"],String.prototype.padStart||e.push("https://cdn.jsdelivr.net/npm/string-polyfills"),[4,u(e)];case 1:return t.sent(),Q=T(),[2]}}))}))},getLevelSelector:function(e,t){return m(Q,e,t)},afterRender:function(){l()},generateQuestions:function(e){return c(R,window.ALL_QUESTIONS,e,!1)},reset:function(){D()}},U=function(e,t){var n,r,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(e,u)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};function z(e){var t=new Date,n=t.getMonth()+t.getDate()+t.getHours(),r=function(e){return window.ALL_QUESTIONS.map((function(t,n){return e.some((function(e){return e===t.id}))?n:-1})).filter((function(e){return e>=0}))}(e);return r.shuffle(),r.map((function(e){return e+n})).join("-").replace(/\-/gi,(function(){return i()}))}function G(){var e=new Date,t=e.getUTCFullYear()+"-"+(e.getUTCMonth()+1).toString().padStart(2,"0")+"-"+e.getUTCDate().toString().padStart(2,"0"),n=e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0");return document.querySelector("#test-date").innerHTML=t+" "+n,t}(function(e,t,n,r){new(n||(n=Promise))((function(o,a){function u(e){try{c(r.next(e))}catch(e){a(e)}}function i(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,i)}c((r=r.apply(e,t||[])).next())}))})(void 0,void 0,void 0,(function(){var e,t,n,r,o,u,i,c,l,d,p,h,v,y,m;return U(this,(function(b){switch(b.label){case 0:return t=f(),n=a("domain")||"js",[4,(r=function(e){switch(e){case"js":return A;case"js-homework":return R;case"math":return N}}(n)).init()];case 1:return b.sent(),o=function(){var e=a("level");return e=e?parseInt(e):10}(),u=G(),t?(r.shuffle=!1,i=a("type")||"theoretical",1===t.length&&(console.info("Generate Test link..."),c="quiz-"+n+"-"+i,l=localStorage.getItem(c)||"",d=prompt("Add all questions",l).split(/\s*,\s*/gi),console.debug("ids",d),localStorage.setItem(c,d.join(", ")),p=z(d),t=f(p),console.debug("indexes",t),h="?domain="+n+"&type="+i+"&test="+p,window.history.pushState({},"",h)),v=localStorage.getItem("quiz-user-name")||"",y=prompt("Enter you full name (firstname & lastname)",v)||v,localStorage.setItem("quiz-user-name",y),document.title="test-"+i+"-"+u+"-"+y,document.querySelector("#student-name").innerHTML=y,s("#reset"),e=function(e){return e.map((function(e){return window.ALL_QUESTIONS[e]}))}(t),console.warn("questions",e)):e=r.generateQuestions(o),t||(m=r.getLevelSelector(o,(function(t){var n=parseInt(t.target.value),a=window.location.search.replace("&level="+o,"");history.pushState(null,"",a+"&level="+n),o=n,e=r.generateQuestions(o),w.reset(e),r.reset(),G()})),document.querySelector("#questions").appendChild(m)),w.render(e,r),[2]}}))}))}]);