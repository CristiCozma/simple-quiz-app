!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o="data/answers.json";function a(e){return(location.search.split(e+"=")[1]||"").split("&")[0]}function u(){var e="abcdefghijklmnopqrstuvwxyz";return e[Math.floor(Math.random()*e.length)]}var c,i,l,s,f,d=function(e,t,n){var r=document.createElement("div");return r.classList.add("level-selector"),e&&e.length&&(r.innerHTML='\n      <label>\n        Nivel\n        <select name="levelSelector">\n          '+e.map((function(e){return'<option value="'+e.value+'" '+(e.value===t?'selected="selected"':"")+">"+e.text+"</option>"})).join("")+"\n        </select>\n      </label>\n    ",r.querySelector("select").addEventListener("change",n)),r},p=(i={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'"},l={},s=function(){var e=[];for(var t in i){var n=i[t];l[n]=t,e.push(n)}return new RegExp("("+e.join("|")+")","g")}(),f=function(e,t){return l[t]},{reset:function(e){Array.from(document.querySelectorAll("#questions article")).forEach((function(e){e.parentNode.removeChild(e)})),p.render(e,c),document.querySelector("#result .q-point").innerHTML="&nbsp;",document.querySelector("#test-result .q-point").innerHTML="&nbsp;",document.querySelector("#submit-test").style.display=""},render:function(e,t){!function e(t,n){if(Array.isArray(t))t.forEach((function(t,n){e(t,n+1)}));else if(void 0!==t){var r=t.q,o=t.type||"js";"html"===o?r=function(e){return e=e.replace(/</g,"&lt;")}(r):"function"==typeof r?r=function(e){var t=e.trim();return t=(t=(t=t.replace(/\s*\(\s*\)\s*=>\s*{/,"")).replace(/function\s+q\d+\(\)\s*\{/,"")).substring(0,t.length-1),h(t)}(r.toString()):r&&(r=h(r));var a=t.answerType||"checkbox",u=t.answers?y(t.id,t.answers,a):"",c=v(t.text,r,u,n,t.id,o,t);document.querySelector("#questions").appendChild(c)}else console.warn("no function")}(e),(c=t)&&c.afterRender(),p.correctAnswers(e)},isText:function(e){return"text"===e||"number"===e},correctAnswers:function(e){window.questions=e,window.correctAnswers=e.reduce((function(e,t){var n;if(p.isText(t.answerType))n=t.answers[0].correct;else{var r=t.answers.find((function(e){return!0===e.correct}));r&&(n=r.id)}return void 0!==n&&(e[t.id]=[n]),e}),{})},htmlEncode:function(e){return e?String(e).replace(s,f):e},sanitizeAnswer:function(e){var t=e.type,n=p.htmlEncode(e.text);switch(t){case"mixed":n=e.text;break;case"js":case"html":case"css":case"code":n="<code>"+n+"</code>"}return n},checkPoints:function(e,t){return t||(console.warn("no correctAnswers for ",e,e[0].id),console.warn("question",document.querySelector('input[name="'+e[0].id+'"]').parentNode.parentNode.parentNode),t=[]),e.map((function(e){var n,o;return p.isText(e.type)?(n=!0,o=e.value==t[0]?1:0):(n=t.indexOf(e.value)>=0,o=e.checked&&n?1:e.checked?-1:0),r(r({},e),{point:o,required:n})}))},markResults:function(e){e.forEach((function(e){var t=p.isText(e.type),n=(t?document.querySelector('input[name="'+e.id+'"]'):document.querySelector('input[name="'+e.id+'"][value="'+e.value+'"]')).parentNode;n.classList.remove("correct-answer"),n.classList.remove("required-answer"),n.classList.remove("incorrect-answer"),e.required&&e.checked?!t||e.point?n.classList.add("correct-answer"):n.classList.add("incorrect-answer"):e.required&&!e.checked?n.classList.add("required-answer"):!e.required&&e.checked&&n.classList.add("incorrect-answer")}))}});Array.prototype.shuffle=function(){var e,t,n=this.length;if(0==n)return this;for(;--n;)e=Math.floor(Math.random()*(n+1)),t=this[n],this[n]=this[e],this[e]=t;return this};var h=function(e){return e=(e=(e=e.replace(/</g,"&lt;")).replace(/\}\}/g,"} } ")).replace(/\n\s*\n/g,"\n")};var v=function(e,t,n,r,o,a,u){var c=n?'<ol type="A" class="'+(u.answerDisplay||"")+'">\n         '+n+"\n       </ol>":"";r=r?r+") ":"";var i=t?'<pre class="code" data-type="'+a+'">'+t+"</pre>":"",l=document.createElement("article");return l.id="q-"+o,l.innerHTML='<h2><span class="q-point"></span><span class="q-nr">'+r+"</span>"+e+"</h2>\n    "+i+"\n    "+c,l},y=function(e,t,n){return window.shuffle&&t.shuffle(),"<li>"+(t||[]).map((function(t){return'<label><input class="answer" type="'+n+'" name="'+e+'" value="'+(p.isText(n)?"":t.id)+'">'+p.sanitizeAnswer(t)+"</label>"})).join("</li><li>")+"</li>"},m=function(e,t){var n=p.checkPoints(e,t);p.markResults(n);var r=n.reduce((function(e,t){return e+t.point}),0),o=t.length;return 0===o&&(o=1),(r>0?r:0)/o},w=function(e,t){var n=Object.keys(e).length,r=0;for(var o in e)if(e.hasOwnProperty(o)){var u=m(e[o],t[o]),c=Math.round(100*u)/100;document.querySelector("#q-"+o+" .q-point").innerHTML=""+c,1===c&&document.querySelector("#q-"+o).classList.add("correct"),r+=u}r=r.toFixed(2),document.querySelector("#result .q-point").innerHTML=r+"/"+n,document.querySelector("#test-result .q-point").innerHTML=r+"/"+n,document.querySelector("#submit-test").disabled=!0,b(!0),a("test")&&window.print()},b=function(e){Array.from(document.querySelectorAll("input.answer")).forEach((function(t){"radio"===t.type||"checkbox"===t.type?t.disabled=e:t.readOnly=e}))};window.submitTest=function(){var e=Array.from(document.querySelectorAll("input.answer")).map((function(e){var t=e.type,n=p.isText(t);return{id:e.name,value:n?e.value:1*e.value,checked:n?""!==e.value:e.checked,type:t}})).reduce((function(e,t){return e[t.id]=e[t.id]||[],e[t.id].push(t),e}),{});"{}"!==JSON.stringify(window.correctAnswers)?w(e,window.correctAnswers):fetch(o).then((function(e){return e.json()})).then((function(t){w(e,t)}))};var g=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function u(e){try{i(r.next(e))}catch(e){a(e)}}function c(e){try{i(r.throw(e))}catch(e){a(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,c)}i((r=r.apply(e,t||[])).next())}))},x=function(e,t){var n,r,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(e,u)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},S=[],q=function(){var e=this;return{init:function(){return g(e,void 0,void 0,(function(){return x(this,(function(e){switch(e.label){case 0:return[4,(t=["js/questions/js.js","https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.3/ace.js","https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.3/ext-beautify.js","https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.3/mode-javascript.js"],t=[].concat(t),Promise.all(t.map((function(e){return new Promise((function(t){var n=document.createElement("script");n.type="text/javascript",n.src=e,n.async=!1,n.onload=function(){t()},document.getElementsByTagName("head")[0].appendChild(n)}))}))))];case 1:return e.sent(),S=Object.keys(window.ALL_QUESTIONS.reduce((function(e,t){return e[t.level]=t.level,t.level||console.warn("no level",t),e}),{})).map((function(e){return{value:e,text:e}})),[2]}var t}))}))},getLevelSelector:function(e,t){return d(S,e,t)},afterRender:function(){var e;e={js:"ace/mode/javascript",html:"ace/mode/html"},Array.from(document.querySelectorAll("article .code")).forEach((function(t){var n=t.getAttribute("data-type"),r=ace.edit(t),o=ace.require("ace/ext/beautify"),a=r.getSession();r.setReadOnly(!0),r.getSession().selection.on("changeSelection",(function(){r.getSession().selection.clearSelection()})),r.setTheme("ace/theme/monokai"),a.setMode(e[n]),o.beautify(a),r.setOptions({maxLines:1/0})}))},generateQuestions:function(e){return function(e,t){var n=e.filter((function(e){return e.level<=t&&e.answers&&e.answers.length}));return window.shuffle&&n.shuffle(),(n=n.slice(0,10)).sort((function(e,t){return e.level-t.level})),n}(window.ALL_QUESTIONS,e)}}}(),j=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function u(e){try{i(r.next(e))}catch(e){a(e)}}function c(e){try{i(r.throw(e))}catch(e){a(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,c)}i((r=r.apply(e,t||[])).next())}))},M=function(e,t){var n,r,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(e,u)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},T=[{value:10,text:"Clasa I. Adunare cu trecere peste ordin - &#128288;",generator:function(){return k("+",3,"radio")}},{value:11,text:"Clasa I. Adunare cu trecere peste ordin - &#9997;",generator:function(){return k("+",3,"number")}},{value:15,text:"Clasa I. Adunare - afla numarul necunoscut - &#128288;",generator:function(){return k("+",0,"radio")}},{value:16,text:"Clasa I. Adunare - afla numarul necunoscut - &#9997;",generator:function(){return k("+",0,"number")}},{value:20,text:"Clasa I. Scaderea cu trecere peste ordin - &#128288;",generator:function(){return k("-",3,"radio")}},{value:21,text:"Clasa I. Scaderea cu trecere peste ordin - &#9997;",generator:function(){return k("-",3,"number")}},{value:25,text:"Clasa I. Scaderea - afla numarul necunoscut - &#128288;",generator:function(){return k("-",0,"radio")}},{value:26,text:"Clasa I. Scaderea - afla numarul necunoscut - &#9997;",generator:function(){return k("-",0,"number")}},{value:27,text:"Clasa I. Adunare si Scaderea - &#9997;",generator:function(){return k("",0,"number")}}],k=function(e,t,n){void 0===n&&(n="radio");for(var r=[],o=0;o<10;o++){var a=e||(Math.random()<.5?"+":"-"),c=void 0,i=void 0,l=void 0,s=void 0;"+"===a?(s=(l=Math.floor(79*Math.random())+20)%10+1,i=l-(c=Math.floor(Math.random()*(l-s))+s)):(s=(c=Math.floor(79*Math.random())+20)%10+1,l=c-(i=Math.floor(Math.random()*(c-s))+s));var f=t||1+Math.floor(2*Math.random()),d=void 0,p=u();1===f?(d=c,c=p):2===f?(d=i,i=p):(d=l,l="?");var h=A(d,n);r.push({id:o,level:10,text:c+" "+a+" "+i+" = "+l,answerType:n,answerDisplay:"inline-block",answers:h})}return r},A=function(e,t){var n=[];if("radio"===t)for(var r=Math.min(Math.floor(4*Math.random()),e),o=0;o<4;o++,r--)n.push({id:o,text:e-r,correct:0===r});else n.push({id:0,text:"",correct:e});return n},L=function(){var e=this;return{init:function(){return j(e,void 0,void 0,(function(){return M(this,(function(e){return[2]}))}))},getLevelSelector:function(e,t){return d(T,e,t)},afterRender:function(){},generateQuestions:function(e){var t=T.find((function(t){return t.value===e}));return t||(console.warn("TODO find closest generator"),t=T[0]),t.generator()}}}(),O=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function u(e){try{i(r.next(e))}catch(e){a(e)}}function c(e){try{i(r.throw(e))}catch(e){a(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,c)}i((r=r.apply(e,t||[])).next())}))},E=function(e,t){var n,r,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(e,u)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};window.shuffle=!0;O(void 0,void 0,void 0,(function(){var e,t,n,r,o,u,c,i;return E(this,(function(l){switch(l.label){case 0:return n=function(){var e=a("test");if(!e)return null;var t=new Date,n=t.getMonth()+t.getDate()+t.getHours();return e.split(/[a-z]+/).map((function(e){return parseInt(e)-n})).sort((function(e,t){return e-t}))}(),r=a("domain")||"js",o=(o=a("level"))?parseInt(o):10,"js"===r?e=q:"math"===r&&(e=L),[4,e.init()];case 1:return l.sent(),u=function(){var e=new Date,t=e.getUTCFullYear()+"-"+(e.getUTCMonth()+1)+"-"+e.getUTCDate(),n=e.getHours()+":"+e.getMinutes();return document.querySelector("#test-date").innerHTML=t+" "+n,t}(),n?(window.shuffle=!1,c=prompt("Enter you full name (firstname & lastname)"),document.title="test-"+u+"-"+c,document.querySelector("#reset").style.display="none",document.querySelector("#student-name").innerHTML=c,t=function(e){return e.map((function(e){return window.ALL_QUESTIONS[e]}))}(n)):("math"===r&&(document.querySelector("#test-result").style.display="none"),t=e.generateQuestions(o)),i=e.getLevelSelector(o,(function(n){var r=parseInt(n.target.value),a=window.location.search.replace("&level="+o,"");history.pushState(null,"",a+"&level="+r),o=r,t=e.generateQuestions(o),p.reset(t)})),document.querySelector("#questions").appendChild(i),p.render(t,e),[2]}}))}))}]);